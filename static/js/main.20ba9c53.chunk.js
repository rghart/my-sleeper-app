(this["webpackJsonpsleeper-app"]=this["webpackJsonpsleeper-app"]||[]).push([[0],{10:function(e,a,t){e.exports=t(18)},15:function(e,a,t){},17:function(e,a,t){},18:function(e,a,t){"use strict";t.r(a);var n=t(0),r=t.n(n),s=t(8),l=t.n(s),i=(t(15),t(5)),c=t.n(i),o=t(6),u=t(1),m=t(2),p=t(4),d=t(3),h=(t(17),function(e){var a=e.children,t=e.allLeagueIDs,n=e.leagueID,s=e.updateLeagueID,l=e.getLeagueData;return r.a.createElement("div",{className:"search-box"},r.a.createElement("div",null,a),r.a.createElement("div",null,r.a.createElement("select",{value:n,onChange:s},t.map((function(e){return r.a.createElement("option",{value:e.league_id},e.name)}))),r.a.createElement("button",{onClick:l},"Submit")))}),f=function(e){var a=e.checked,t=e.handleChange,n=e.labelName,s=e.name;return r.a.createElement("label",{className:"radio-label"},r.a.createElement("input",{className:"radioPad",type:"checkbox",checked:a,onChange:t,name:s}),n)},g=function(e){var a=e.player,t=e.addToRoster,n=e.rankingPlayersIdsList;return r.a.createElement("div",{key:a.player_id,className:"single-player-item ".concat(a.position," ").concat(a.is_taken?"":"available")},r.a.createElement("div",{className:"player-name"},r.a.createElement("p",null,r.a.createElement("b",null,"Player name: ",a.full_name)),r.a.createElement("p",{className:"player-info-item"},"- ",a.team),r.a.createElement("p",{className:"player-info-item"},"(",a.position,")")),r.a.createElement("div",{className:"player-info"},r.a.createElement("p",{className:"player-info-item"},r.a.createElement("b",null,"Is rostered:")," ",a.is_taken?a.is_taken.toString():"false"," "),r.a.createElement("p",{className:"player-info-item"},r.a.createElement("b",null,"Rostered by:")," ",a.rostered_by?a.rostered_by:"None"),r.a.createElement("p",{className:"player-info-item"},r.a.createElement("b",null,"Weekly rank:")," ",n.indexOf(a.player_id)+1),r.a.createElement("button",{onClick:function(){return t(a)}},"Add")))},y=t(9),E=function(e){Object(p.a)(t,e);var a=Object(d.a)(t);function t(){var e;Object(u.a)(this,t);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(e=a.call.apply(a,[this].concat(r))).state={playerInfo:{},leagueData:[],isLoading:!0,rankingPlayersIdsList:[],filteredPlayersIdsList:[],isTyping:!1,searchText:"",checkedItems:["QB","RB","WR","TE","K","DEF"],showAvailable:!0,showOnlyMyPlayers:!0,leagueID:"521036158513700864",allLeagueIDs:[],rosterPositions:[]},e.getPlayerData=Object(o.a)(c.a.mark((function a(){return c.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,fetch("https://sleeper-player-db-default-rtdb.firebaseio.com/.json").then((function(e){return e.json()})).then((function(a){e.setState({playerInfo:a})})).catch((function(e){console.error("Error:",e)}));case 2:e.getLeagueData();case 3:case"end":return a.stop()}}),a)}))),e.getLeagueData=Object(o.a)(c.a.mark((function a(){var t,n,r;return c.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:e.setState({isLoading:!0}),t=e.state.leagueID,n=["https://api.sleeper.app/v1/league/".concat(t,"/rosters"),"https://api.sleeper.app/v1/league/".concat(t,"/users"),"https://api.sleeper.app/v1/league/".concat(t),"https://api.sleeper.app/v1/user/521035584588267520/leagues/nfl/2020"],r=n.map((function(e){return fetch(e)})),Promise.all(r).then((function(e){return Promise.all(e.map((function(e){return e.json()})))})).then((function(a){console.log(a),e.markTakenPlayers(a[0],a[1]);var t=a[3];e.setState({leagueData:a,isLoading:!1,rosterPositions:a[2].roster_positions.filter((function(e){return"BN"!==e})),allLeagueIDs:t}),e.state.rankingPlayersIdsList&&e.filterPlayers()})).catch((function(e){console.error("Error:",e)}));case 5:case"end":return a.stop()}}),a)}))),e.markTakenPlayers=function(a,t){var n=e.state.playerInfo;if(e.state.rankingPlayersIdsList)for(var r=0;r<Object.keys(n).length+1;r++)n[r]&&(n[r].is_taken=!1,n[r].rostered_by=null);for(var s=function(e){var r=a[e].owner_id,s=t.find((function(e){return e.user_id===r}));a[e].manager_display_name=s.display_name,a[e].players.forEach((function(t){n[t].is_taken=!0,n[t].rostered_by=a[e].manager_display_name}))},l=0;l<a.length;l++)s(l);e.setState({playerInfo:n})},e.updateSearchText=function(a){var t=a.target.value;e.setState({searchText:t})},e.updateLeagueID=function(a){var t=a.target.value;e.setState({leagueID:t})},e.handleChange=function(a){var t=a.target.name,n=e.state.checkedItems.indexOf(t),r=e.state.checkedItems;-1!==n?r.splice(n,1):r.push(t),e.setState({checkedItems:r}),e.filterPlayers()},e.updateRankings=Object(o.a)(c.a.mark((function a(){var t,n,r,s,l,i,o;return c.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return e.setState({isLoading:!0}),(t=Object.values(e.state.playerInfo)).sort((function(e,a){return e.search_rank-a.search_rank})),n={useExtendedSearch:!0,keys:["search_last_name","search_first_name","team"]},r=new y.a(t,n),s=e.state.searchText,l=s.replace(/(?:\r\n|\r|\n)/g,"<br>"),i=l.split("<br>"),o=[],i.forEach((function(e){var a=(e=e.replace(/[0-9]/g,"")).split("");"."===a[1]&&a.splice(1,1," ");var t=a.join("").split(/\t/)[0];(t=t.split(" "))[3]&&t.splice(2,1),"."===t[1].split("")[1]&&t[1].split("").splice(0,2);var n=r.search({$and:[{search_first_name:"^".concat(t[0])},{search_last_name:t[1]},{team:t[2]}]});n[0]?(o.push(n[0].item.player_id),n[0].item.search_rank>500&&console.log("".concat(n[0].item.full_name," ").concat(n[0].item.position," ").concat(n[0].item.team," Rank: ").concat(o.length-1))):console.log("Couldn't find ".concat(t[0]," ").concat(t[1]," ").concat(t[2]))})),a.next=12,e.setState({rankingPlayersIdsList:o,isLoading:!1});case 12:e.filterPlayers();case 13:case"end":return a.stop()}}),a)}))),e.filterPlayers=function(){var a=e.state.rankingPlayersIdsList.filter((function(a){return e.state.checkedItems.includes(e.state.playerInfo[a].position)&&(!0!==e.state.playerInfo[a].is_taken||"ryangh"===e.state.playerInfo[a].rostered_by)}));e.setState({filteredPlayersIdsList:a})},e.addToRoster=function(a){var t=e.state.rosterPositions;console.log(a),"TE"===a.position||"RB"===a.position||"WR"===a.position?(a.fantasy_positions.push("FLEX"),a.fantasy_positions.push("SUPER_FLEX")):"QB"===a.position&&a.fantasy_positions.push("SUPER_FLEX");for(var n=0;n<a.fantasy_positions.length;n++){if(t.includes(a.fantasy_positions[n])){var r=t.indexOf(a.fantasy_positions[n]);t.splice(r,1,a.fantasy_positions[n]+" "+a.full_name+" "+a.team);break}}e.setState({rosterPositions:t})},e}return Object(m.a)(t,[{key:"componentDidMount",value:function(){this.getPlayerData()}},{key:"render",value:function(){var e=this,a=this.state,t=a.playerInfo,n=a.isLoading,s=a.filteredPlayersIdsList,l=a.searchText,i=a.checkedItems,c=a.rankingPlayersIdsList,o=a.rosterPositions,u=a.leagueData;return n?r.a.createElement("p",null,"Loading..."):r.a.createElement("div",{className:"main-container"},r.a.createElement("div",{className:"search"},r.a.createElement("div",{className:"position-filter"},r.a.createElement(f,{name:"QB",handleChange:this.handleChange,labelName:"QB",checked:i.includes("QB")}),r.a.createElement(f,{name:"RB",handleChange:this.handleChange,labelName:"RB",checked:i.includes("RB")}),r.a.createElement(f,{name:"WR",handleChange:this.handleChange,labelName:"WR",checked:i.includes("WR")}),r.a.createElement(f,{name:"TE",handleChange:this.handleChange,labelName:"TE",checked:i.includes("TE")}),r.a.createElement(f,{name:"K",handleChange:this.handleChange,labelName:"K",checked:i.includes("K")}),r.a.createElement(f,{name:"DEF",handleChange:this.handleChange,labelName:"DEF",checked:i.includes("DEF")})),r.a.createElement("textarea",{value:l,onChange:this.updateSearchText}),r.a.createElement("button",{onClick:this.updateRankings},"Submit")),r.a.createElement("div",{className:"player-grid"},s.map((function(a){return r.a.createElement(g,{player:t[a],addToRoster:e.addToRoster,rankingPlayersIdsList:c})}))),r.a.createElement("div",{className:"league-grid"},r.a.createElement("p",null,r.a.createElement("b",null,u[2].name)),r.a.createElement(h,{allLeagueIDs:this.state.allLeagueIDs,leagueID:this.state.leagueID,updateLeagueID:this.updateLeagueID,getLeagueData:this.getLeagueData})),r.a.createElement("div",{className:"roster-positions"},o.map((function(e){return r.a.createElement("p",null,e)}))))}}]),t}(r.a.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));l.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(E,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[10,1,2]]]);
//# sourceMappingURL=main.20ba9c53.chunk.js.map